# 并发编程

## 关于并发安全

### 必要性

* 线程并发执行时，如果线程之间互不干扰则不会对运行结果产生影响，但是如果两个线程执行时需要操作同一份数据，那么他们的执行可能会互相干扰。
* 操作共享数据的代码范围称为临界区
* 并发编程考虑的是如何处理临界区的问题

### 最佳实践

* 永远在访问可变变量的时候加锁
* 永远在更新对象的时候加锁
* 永远不在访问其他方法的时候加锁

减小锁的粒度

拆分锁

并发 的工具

* 可以通过各种方法实现对共享数据的安全操作，从重型锁到轻量级锁，可重入锁，读写锁，无锁依据实际业务环境的不同
* 使用不同的并发技术解决访问安全的问题

![image-20210514164153472](C:\Users\DELL\AppData\Roaming\Typora\typora-user-images\image-20210514164153472.png)

## 并发的实现

**单个不可复用的线程**

* 实现Runnable接口或，向线程中提交任务，new Thread 开启不可复用的线程

* 实现callable接口，重新run方法，new Thread 提交任务
* 继承Thread类，重新run方法，使用start调用

**线程池实现**

* 线程池工具类 
  * 固定大小线程池
  * 单线程池
  * 缓存线程池： 核心线程数位零，最大线程池数无限大
  * 可定时或周期性执行任务的线程，队列是按照超时时间升序排列的